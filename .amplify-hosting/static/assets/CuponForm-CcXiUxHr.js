import{r as l,j as e}from"./jsx-runtime-D2HyDbKh.js";import{u as P,a as k,b as U}from"./index-CD45sefw.js";import{a as X,b as G,L}from"./components-Cuo2WHyh.js";import{F as j}from"./index-zFQnOIg2.js";function M({categorias:b,promociones:y,cuponData:s}){const N=P(),w=k(),t=s?{nombre:s.nombre,oferta:s.oferta,descripcion:s.descripcion,fecha:s.fecha,categoria:s.categoria,servicio:s.servicio,visitsRequired:s.visitsRequired,activo:s.activo,formulaData:s.formulaData}:{nombre:"",descripcion:"",fecha:"",categoria:"",servicio:"",activo:"",oferta:"",visitsRequired:1};new Date().toISOString().slice(0,10);const x=X();G(),U(),l.useRef();const[T,S]=l.useState(!0),V=a=>{S(a),N("/")},[o,D]=l.useState(t.oferta),[h,C]=l.useState(""),[n,c]=l.useState(""),[d,m]=l.useState(""),[F,q]=l.useState(t.categoria),g=a=>{let r=n,i=d;a.target.name==="dataUno"&&(r=a.target.value,c(r)),a.target.name==="dataDos"&&(i=a.target.value,m(i));const v=r+" X "+i;C(v),console.log("EVENT TARGET",v)};l.useEffect(()=>{if(t.formulaData)if(t.oferta==="bogo"||t.oferta==="unoporuno"){let a="",r="";const i=t.formulaData,u=i.indexOf(" X ");a=i.slice(0,u).trim(),r=i.slice(u+2,i.length).trim(),c(a),m(r),console.log("separar formula data",a," X ",r)}else console.log("no separar formula data")},[t.formulaData,t.oferta,c,m]);const R=a=>{let r=a.target.selectedIndex;D(a.target.options[r].value)},A=a=>{let r=a.target.selectedIndex;q(a.target.options[r].value)};console.log("cuponsSSSSSS",s);const f=w.state!=="idle",[p,E]=l.useState(s.activo),O=()=>{E(!p)};return e.jsxs(e.Fragment,{children:[e.jsxs(j,{method:s?"patch":"post",className:"w-11/12 md:min-w-[450px]  flex-col flex gap-5 text-gray-800",id:"dream-form",children:[e.jsxs("div",{className:"form-row flex flex-col gap-2 text-xl",children:[e.jsxs("div",{className:"Nombre flex flex-col items-start  gap-3",children:[e.jsx("label",{className:" text-gray-100",htmlFor:"nombre",children:"Nombre"}),e.jsx("input",{className:"h-10 p-4 w-full",type:"text",id:"nombre",name:"nombre",required:!0,maxLength:30,defaultValue:t.nombre})]}),e.jsxs("div",{className:"oferta promocion",children:[e.jsxs("label",{className:" text-gray-100",htmlFor:"oferta",children:[" ","Promoción"," "]}),e.jsxs("select",{className:" block appearance-auto w-full rounded-sm  shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-gray-600  p-4  focus:outline-none focus:bg-white focus:border-gray-500 border border-gray-400 hover:border-gray-200 leading-tight",id:"oferta",name:"oferta",required:!0,onChange:R,value:o,defaultValue:t.oferta,children:[e.jsx("option",{value:"",children:" Tipo de promoción "}),e.jsx("option",{value:"dinero",children:"Descuento $ "}),e.jsx("option",{value:"unoporuno",children:" # x #"}),e.jsx("option",{value:"bogo",children:" BOGO"}),y.map(a=>e.jsxs("option",{value:a.nombre,children:[" ",a.nombre]},a.id))]}),o&&e.jsxs("div",{className:" bg-gray-600 p-3 flex justify-center",children:[o==="Porcentaje"&&e.jsxs("div",{className:"flex  items-center",children:[e.jsx("div",{className:"text-gray-300",children:"Porcentaje a otorgar "}),e.jsx("input",{className:"h-10 text-center ml-5 mr-1 p-4 w-[130px] my-1",type:"number",max:"100",id:"formulaData",name:"formulaData",defaultValue:t.formulaData}),e.jsx("div",{className:"text-gray-300 text-xl",children:"% "})]}),o==="dinero"&&e.jsxs("div",{className:"flex  items-center",children:[e.jsx("div",{className:"text-gray-300",children:"Cantidad de Descuento "}),e.jsx("div",{className:"text-gray-300 text-xl  ml-5 mr-1",children:"$ "}),e.jsx("input",{className:"h-10 text-center p-4 w-[130px] my-1",type:"number",id:"formulaData",name:"formulaData",defaultValue:t.formulaData})]}),o==="unoporuno"&&e.jsxs("div",{className:"flex  items-center  ",children:[e.jsxs("div",{className:"text-gray-300 mr-5",children:[" ","¿Cuanto por cuanto?"," "]}),e.jsxs("div",{className:"flex items-center",onChange:g,children:[e.jsx("input",{name:"dataUno",className:"h-10 p-4 w-1/3 my-1",type:"number",defaultValue:n}),e.jsxs("div",{className:"text-gray-300 text-xl  ml-5 mr-5",children:[" ","X"," "]}),e.jsx("input",{name:"dataDos",className:"h-10 p-4 w-1/3 my-1",type:"number",defaultValue:d})]}),e.jsx("input",{type:"text",id:"formulaData",name:"formulaData",hidden:!0,value:h})]}),o==="bogo"&&e.jsx(e.Fragment,{children:e.jsxs("div",{onChange:g,className:"flex flex-col gap-5 w-full ",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-300",children:"Buy One "}),e.jsx("input",{name:"dataUno",className:"h-10 p-4 w-full my-1",type:"text",defaultValue:n})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-300 mb-0",children:"Get One "}),e.jsx("input",{name:"dataDos",className:"h-10 p-4 w-full my-1 mt-0",type:"text",defaultValue:d}),e.jsx("input",{type:"text",id:"formulaData",name:"formulaData",hidden:!0,value:h})]})]})})]})]}),e.jsxs("div",{className:"Categoria ",children:[e.jsxs("label",{className:" text-gray-100",htmlFor:"categoria",children:[" ","Categoría"," "]}),e.jsxs("select",{className:" p-4 w-full ",id:"categoria",name:"categoria",required:!0,onChange:A,value:F,defaultValue:t.categoria,children:[e.jsx("option",{value:"",children:" Categoría "}),b.map(a=>e.jsxs("option",{value:a.nombre,children:[" ",a.nombre]},a.id))]})]}),e.jsxs("div",{className:"etiqueta ",children:[e.jsxs("label",{className:" text-gray-100",htmlFor:"servicio",children:[" ","Servicio"," "]}),e.jsx("input",{id:"servicio",className:"h-10 p-4 w-full",type:"text",name:"servicio",defaultValue:t.servicio})]}),e.jsxs("div",{className:"descripcion flex flex-col items-start  gap-3",children:[e.jsx("label",{className:"mt-5 text-gray-100",htmlFor:"descripcion",children:"Descripción"}),e.jsx("textarea",{type:"text",id:"descripcion",name:"descripcion",className:"p-2 h-[30vh] w-full",required:!0,defaultValue:t.descripcion})]}),e.jsxs("div",{className:"flex  items-center  ",children:[e.jsxs("label",{htmlFor:"visitsRequired",className:"text-gray-300 mr-5",children:[" ","Visitas Requeridas"," "]}),e.jsx("input",{id:"visitsRequired",name:"visitsRequired",className:"h-10 p-4 w-1/3 my-1",min:"1",max:"4",type:"number",defaultValue:t.visitsRequired,required:!0})]}),e.jsxs("div",{className:"Activar flex align-middle gap-5 ",children:[e.jsxs("label",{className:" text-gray-100",htmlFor:"activo",children:[" ","Activar"," "]}),e.jsx("input",{className:" tw-5 h-5 ",id:"activo",name:"activo",type:"checkbox",checked:p,onChange:O,defaultValue:t.activo})]})]}),x&&e.jsx("div",{children:Object.values(x).map(a=>e.jsx("p",{children:a},a))}),e.jsxs("div",{className:"flex-wrap text-gray-200 mt-16  mb-2 form-actions flex flex-row gap-5 justify-end ",children:[e.jsxs(L,{to:"/cuponsList",className:"bg-gray-800 w-min p-5 rounded-lg",children:[" ","Regresar"," "]}),e.jsx("button",{className:"border-gray-300 rounded-lg border bg-darkest p-5 py-3 ",onClick:()=>V(!0),disabled:f,children:f?"Actualizando...":"Actualizar"})]})]}),e.jsx(j,{method:"delete",children:e.jsx("button",{className:"border-gray-300 rounded-lg border bg-gray-950 p-5 py-5 ",to:"..",children:"Borrar"})})]})}export{M as C};
